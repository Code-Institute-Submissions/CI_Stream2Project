<!DOCTYPE html>
<html>
<head>
  <title>Utah Governor Election Campaign</title>
  <link rel="stylesheet" href="{{ url_for ('static',
    filename='lib/css/bootstrap.min.css')}}">
  <link rel="stylesheet" href="{{ url_for ('static',
    filename='lib/css/keen-dashboards.css')}}">
  <link rel="stylesheet" href="{{ url_for ('static', filename='lib/css/dc.css')}}">
  <link rel="stylesheet" href="{{ url_for ('static', filename='css/custom.css')}}">
  <link rel="stylesheet" href="{{url_for ('static', filename='lib/css/introjs.css')}}" />
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>
      var svg = d3.select("svg"),
      width = +svg.attr("width"),
      height = +svg.attr("height");
  
  var format = d3.format(",d");
  
  var color = d3.scaleOrdinal(d3.schemeCategory20c);
  
  var pack = d3.pack()
      .size([width, height])
      .padding(1.5);
  
  d3.csv("flare.csv", function(d) {
    d.value = +d.value;
    if (d.value) return d;
  }, function(error, classes) {
    if (error) throw error;
  
    var root = d3.hierarchy({children: classes})
        .sum(function(d) { return d.value; })
        .each(function(d) {
          if (id = d.data.id) {
            var id, i = id.lastIndexOf(".");
            d.id = id;
            d.package = id.slice(0, i);
            d.class = id.slice(i + 1);
          }
        });
  
    var node = svg.selectAll(".node")
      .data(pack(root).leaves())
      .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
  
    node.append("circle")
        .attr("id", function(d) { return d.id; })
        .attr("r", function(d) { return d.r; })
        .style("fill", function(d) { return color(d.package); });
  
    node.append("clipPath")
        .attr("id", function(d) { return "clip-" + d.id; })
      .append("use")
        .attr("xlink:href", function(d) { return "#" + d.id; });
  
    node.append("text")
        .attr("clip-path", function(d) { return "url(#clip-" + d.id + ")"; })
      .selectAll("tspan")
      .data(function(d) { return d.class.split(/(?=[A-Z][^A-Z])/g); })
      .enter().append("tspan")
        .attr("x", 0)
        .attr("y", function(d, i, nodes) { return 13 + (i - nodes.length / 2 - 0.5) * 10; })
        .text(function(d) { return d; });
  
    node.append("title")
        .text(function(d) { return d.id + "\n" + format(d.value); });
  });
      </script>
     <title>Flask Stock Visualizer</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link href={{ url_for('static', filename='./bower_components/bootstrap/dist/css/bootstrap.min.css') }} rel="stylesheet" media="screen">
     <link href={{ url_for('static', filename='main.css') }} rel="stylesheet" media="screen"> 
</head>
<body class="application">
  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="./">Utah Governor Election Campaign</a>

          <nav>
<a class="navbar-brand" href="#myPage"></a>
</div>
<div class="collapse navbar-collapse" id="myNavbar">
  <ul class="nav navbar-nav navbar-right">
   <li><a href="/">Home</a></li>
     <li><a href="Platform.html">Platform</a></li>
     <li><a href="Proposals.html">Proposal</a></li>
  </nav>
          <img src="static/images/Flag.png" alt="Flag" width="50%" height="50%">
        <!--<button class="intro_button" type="button" autofocus onclick="javascript:introJs().start();">Start Tour!</b>-->
      </div>
    </div>
  </div>
  <div class="ul"></div>
  <div  id="outer" class="container-fluid">
    <div class="row">
      <div class="col-sm-8">
        <div class="row">
          <!-- Time Chart -->
         <div class="col-sm-12">
            <div class="chart-wrapper">
              <div class="chart-title">
                Number of Donations
              </div>
              <div class="chart-stage">
                <div id="time-chart"></div>
              </div>
            </div>
          </div> -->
          <!-- Time Chart --> -->
          <label>     I stand on a platform to use innovative measures to increase funding for Utah schools</label>
          
          <script>
              
              var svg = d3.select("svg"),
                  width = +svg.attr("width"),
                  height = +svg.attr("height");
              
              var format = d3.format(",d");
              
              var color = d3.scaleOrdinal(d3.schemeCategory20c);
              
              var pack = d3.pack()
                  .size([width, height])
                  .padding(1.5);
              
              d3.csv("flare.csv", function(d) {
                d.value = +d.value;
                if (d.value) return d;
              }, function(error, classes) {
                if (error) throw error;
              
                var root = d3.hierarchy({children: classes})
                    .sum(function(d) { return d.value; })
                    .each(function(d) {
                      if (id = d.data.id) {
                        var id, i = id.lastIndexOf(".");
                        d.id = id;
                        d.package = id.slice(0, i);
                        d.class = id.slice(i + 1);
                      }
                    });
              
                var node = svg.selectAll(".node")
                  .data(pack(root).leaves())
                  .enter().append("g")
                    .attr("class", "node")
                    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
              
                node.append("circle")
                    .attr("id", function(d) { return d.id; })
                    .attr("r", function(d) { return d.r; })
                    .style("fill", function(d) { return color(d.package); });
              
                node.append("clipPath")
                    .attr("id", function(d) { return "clip-" + d.id; })
                  .append("use")
                    .attr("xlink:href", function(d) { return "#" + d.id; });
              
                node.append("text")
                    .attr("clip-path", function(d) { return "url(#clip-" + d.id + ")"; })
                  .selectAll("tspan")
                  .data(function(d) { return d.class.split(/(?=[A-Z][^A-Z])/g); })
                  .enter().append("tspan")
                    .attr("x", 0)
                    .attr("y", function(d, i, nodes) { return 13 + (i - nodes.length / 2 - 0.5) * 10; })
                    .text(function(d) { return d; });
              
                node.append("title")
                    .text(function(d) { return d.id + "\n" + format(d.value); });
              });
              
              </script>
          <!-- Resources -->
          <div class="col-sm-6">
            <div class="chart-wrapper">
              <div class="chart-title">
                Resources Type
              </div>
              <div class="chart-stage">
                <div id="resource-type-row-chart"></div>
              </div>
            </div>
          </div>
          <!-- Resources -->

          <!-- funding Pie -->
          <div class="col-sm-6">
            <div class="chart-wrapper">
              <div class="chart-title">
                Funding Status
              </div>
              <div class="chart-stage">
                <div id="funding-chart"></div>
              </div>
            </div>
          </div>
          <!-- funding Pie -->
        </div>
      </div>

      <!-- Poverty -->
      <div class="col-sm-3">
        <div class="chart-wrapper">
          <div class="chart-title">
            Poverty Level
          </div>
          <div class="chart-stage">
            <div id="poverty-level-row-chart"></div>
          </div>
        </div>
      </div>
      <!-- Poverty -->

      <!-- menu select -->
      <!-- <div class="col-sm-6">
        <div class="chart-wrapper">
          <div class="chart-title">
            Donation State
          </div>
          <div class="chart-stage">
            <div id="menu-select"></div>
          </div>
        </div>
      </div> -->
      <!-- menu select -->

      <!-- Metric 1 -->
      <div class="col-sm-2">
        <div class="chart-wrapper">
          <div class="chart-title">
            Total Number of Donations
          </div>
          <div class="chart-stage" style="background: #33CC99;
            position: relative;
            font-size: 29px;
            color: white;
            vertical-align: middle;
            text-align: center;
            padding-top: 12px;
            padding-bottom: 0px;">
            <div id="number-projects-nd"></div>
          </div>
        </div>
      </div>
      <!-- Metric 1 -->

      <!-- Metric 2 -->
      <div class="col-sm-2">
        <div class="chart-wrapper">
          <div class="chart-title">
            Total Donations in USD
          </div>
          
          <div class="chart-stage">
            <div id="total-donations-nd"></div>
          </div>
        </div>
      </div>
      <!-- Metric 2 -->
    </div>
  </div>
  <hr>
  

  <div class="container">
      <div id="chart"></div>
  </div>
  <script src={{ url_for('static', filename='./bower_components/jquery/dist/jquery.min.js') }}></script>
  <script src={{ url_for('static', filename='./bower_components/bootstrap/dist/js/bootstrap.min.js') }}></script>
  <script src={{ url_for('static', filename='./bower_components/d3/d3.min.js') }}></script>
  <script src={{ url_for('static', filename='main.js') }}></script>
  <!-- <p class="small text-muted"> Data viz &#9829; from Code Institute</p> -->
  <script src="{{ url_for ('static', filename='lib/js/jquery.min.js')}}"></script>
  <script src="{{ url_for ('static', filename='lib/js/bootstrap.min.js')}}"></script>
  <script src="{{ url_for ('static', filename='lib/js/crossfilter.js')}}"></script>
  <script src="{{ url_for ('static', filename='lib/js/d3.js')}}"></script>
  <script src="{{ url_for ('static', filename='lib/js/dc.js')}}"></script>
  <script src="{{ url_for ('static', filename='lib/js/queue.js')}}"></script>
  <script src="{{ url_for ('static', filename='lib/js/keen.min.js')}}"></script>
  <script src="{{ url_for ('static', filename='js/graph.js')}}"></script>
  <script src="{{url_for ('static', filename='lib/js/intro.js')}}" type="text/javascript"></script>
</body>
</html>